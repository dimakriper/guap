/*
— Ой, какие красивые разноцветные шарики! А какие коробочки! Дедушка, ну, пожалуйста, подари их мне! — воскликнула Евочка, едва переступив порог дедушкиной комнаты.  

— Посмотрим, заслуживаешь ли ты такого подарка, — ответил дедушка и попросил Евочку на некоторое время выйти из комнаты. Но не прошло и минуты, как девочка услышала, что ее уже зовут.  

— Теперь твоя задача: вот коробочки. Одна белая, одна черная, одна красная, одна синяя и одна зеленая, — сказал дедушка. — Шарики тех же цветов, что и коробочки, но два шарика каждого цвета: два белых, два черных, два красных, два синих и два зеленых. В каждую коробочку я положил по два шарика. Чтобы ты не думала, будто цвет шариков в коробочке совпадает с цветом самой коробочки, скажу сразу: шарики по коробочкам я разложил как пришлось. Если ты скажешь, какого цвета шарики лежат в каждой коробочке, то я подарю тебе все шарики вместе с коробочками.  

— Но ведь это очень трудно, — печально вздохнула Евочка.  

— Совсем не трудно, — утешил ее дедушка. — К тому же я помогу тебе — вот послушай:  

1) ни один шарик не лежит в коробочке того же цвета, что и он сам;  
2) в красной коробочке нет синих шариков;  
3) в коробочке нейтрального цвета лежат один красный и один зеленый шарик;  
(Тут Евочка, не выдержав, спросила, что такое нейтральный цвет. Дедушка ей объяснил, что так принято называть белый или черный цвет.)  
4) в черной коробочке лежат шарики холодных цветов;  
(Евочка знала, что холодными называют зеленый и синий цвета.)  
5) в одной из коробочек лежат один белый и один синий шарик;  
6) в синей коробке находится один черный шарик.  

Помогите Евочке решить дедушкину задачу!
*/

% Определяем коробки и их содержимое
solve(Solution) :-
    Solution = [ box(white, W1, W2),
                 box(black, Bla1, Bla2),
                 box(red,   R1, R2),
                 box(blue,  Blu1, Blu2),
                 box(green, G1, G2) ],

    % Каждый цвет встречается ровно 2 раза
    permutation([W1, W2, Bla1, Bla2, R1, R2, Blu1, Blu2, G1, G2], 
                [white, white, black, black, red, red, blue, blue, green, green]),

    % Первое правило: шарики не могут быть в коробке своего цвета
    W1 \= white, W2 \= white,
    Bla1 \= black, Bla2 \= black,
    R1 \= red,   R2 \= red,
    Blu1 \= blue, Blu2 \= blue,
    G1 \= green, G2 \= green,

    % В красной коробке нет синих шариков
    R1 \= blue, R2 \= blue,

    % В белой или чёрной коробке лежат красный и зелёный шарик
    ( (W1 = red, W2 = green) ; (W1 = green, W2 = red) ;
      (Bla1 = red, Bla2 = green) ; (Bla1 = green, Bla2 = red) ),

    % В черной коробке только холодные цвета
    member(Bla1, [green, blue]),
    member(Bla2, [green, blue]),

    % В одной из коробок есть белый и синий шарик
    (  (R1 = white, R2 = blue) ; (R1 = blue, R2 = white) ;
      (Bla1 = white, Bla2 = blue) ; (Bla1 = blue, Bla2 = white) ;
      (G1 = white, G2 = blue) ; (G1 = blue, G2 = white) ),

    % В синей коробке один из шариков черный
    (Blu1 = black ; Blu2 = black),

    % Вывод решения
    write(Solution), nl.

